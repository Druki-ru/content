---
id: form-use
title: Использование форм
path: /8/forms/use
core: 8
metatags:
  title: 'Drupal 8: Использование форм'
  description: 'Использование форм в Drupal 8.'
category:
  area: Формы
  title: Использование
  order: 4
---

После создания формы, вам может потребоваться использовать её в своих целях. Для этого есть несколько вариантов.

## Форма как контроллер

Формы могут выступать контроллерами [маршрутов](../../routing/index.md).

Для этого, конкретному маршруту необходимо указать [свойство](../../routing/structure-of-routes/index.md) `_form`.

Например:

```yaml
foo.form:
  path: '/my-custom-form'
  defaults:
    _form: '\Drupal\foo\Form\FooForm'
  requirements:
    _permission: 'access content'
```

## Программный вызов формы

Формы также могут быть запрошены программно в виде рендер массива. Как вы будете использовать результат программного вызова — ложится на плечи разработчика.

Для построения формы программно используется [сервис](../../services/index.md) `form_builder`. Он позволяет подготавливать форму несколькими способами.

### Получение формы

Метод `getForm()` позволяет получить форму по её названию или экземпляру объекта. В качестве результата вы получите готовый рендер массив готовый для рендера.

Данный способ подразумевает что вам нужна форма в том виде, в каком она объявлена.

Например:

```php
$form = \Drupal::formBuilder()->getForm('Drupal\foo\Form\FooForm');
```

Вы также можете передавать дополнительные аргументы для формы. В дальнейшем они будут доступны в форме через вызов `$form_state->getBuildInfo()['args']`.

Например:

```php
$form = \Drupal::formBuilder()->getForm('Drupal\foo\Form\FooForm', 'foo', 'bar');
```

### Построение формы

Метод `buildForm()` является более низкоуровневым вариантом `getForm()`. В действительности `getForm()` является обёрткой для `buildForm()`.

Основное отличие в том, что в `buildForm()` вы должны самостоятельно подготовить состояние формы `FormStateInterface` и передать его. При помощи данного подхода, вы можете кэшировать состояние формы и собирать предыдущий вариант из кэша при необходимости.

Результатом выполнения будет также рендер массив.

Например:

```php
$form_state = new FormState();
$form_state->set('some_value', 'Hello World');

$form = \Drupal::formBuilder()->buildForm('Drupal\foo\Form\FooForm', $form_state);
```

## Ссылки

- [Drupal 8: Form API что изменилось и как использовать](https://niklan.net/blog/73), Niklan, 2015
